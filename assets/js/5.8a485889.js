(window.webpackJsonp=window.webpackJsonp||[]).push([[5,9,13],{794:function(e,t,s){},796:function(e,t,s){"use strict";s(794)},797:function(e,t,s){"use strict";s.r(t);var l={name:"TextEllipsis",inheritAttrs:!1,props:{content:{type:String,default:""},lineClamp:{type:[Number,String],default:1},openDelay:{type:Number,default:500}},data:()=>({disabled:!0}),methods:{handleMouseEnter({target:e}){const{scrollHeight:t,clientHeight:s}=e;this.disabled=t-s<s/this.lineClamp}}},i=(s(796),s(24)),a=Object(i.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-tooltip",e._b({staticClass:"text-ellipsis",attrs:{disabled:e.disabled,content:e.content,"open-delay":e.openDelay}},"el-tooltip",e.$attrs,!1),[s("div",[s("div",{staticClass:"text-ellipsis-content",style:{"-webkit-line-clamp":e.lineClamp},on:{mouseenter:function(t){return t.stopPropagation(),e.handleMouseEnter.apply(null,arguments)}}},[e._v("\n      "+e._s(e.content)+"\n    ")])])])}),[],!1,null,"76b6fec9",null);t.default=a.exports},802:function(e,t,s){},803:function(e,t,s){"use strict";s(802)},823:function(e,t,s){},835:function(e,t,s){"use strict";s.r(t);var l=s(797);var i={name:"Tree",inheritAttrs:!1,component:{TextEllipsis:l.default},props:{data:{type:Array,default:()=>[]},nodeKey:{type:String,default:"id"},defaultExpandAll:{type:Boolean,default:!1},defaultExpandedKeys:{type:Array,default:()=>[]},filterNodeMethod:{type:Function,default(e,t,s){if(!e)return!0;let l=s.parent,i=[s.label],a=1;for(;a<s.level;)i=[...i,l.label],l=l.parent,a++;return i.some(t=>-1!==t.indexOf(e))}},showCheckAll:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},level:{type:Number,default:1},textEllipsisProps:{type:Object,default:()=>({})},currentIsLeaf:{type:Boolean,default:!1},isLeafMethod:{type:Function}},data:()=>({ref:"elTree",key:"",allNodes:[],maxLevel:0,isFirst:!0,isIndeterminate:!1,checkAll:!1,timeout:null,currentKey:null}),watch:{data:{handler:"handleData",immediate:!0,deep:!0},level:{handler:"expandToLevel",immediate:!0},defaultCheckedKeys:{handler:"handleCheckChange",immediate:!0}},methods:{async expandToLevel(e){if(this.isFirst&&(this.defaultExpandAll||this.defaultExpandedKeys.length))return void(this.isFirst=!1);this.isFirst=!1,this.maxLevel||await this.handleData();const t=this.allNodes.sort((e,t)=>t.level-e.level);0===e?t.forEach(e=>{e.isLeaf&&e.expand(null,!0)}):t.forEach(t=>{t.level>=e?t.expanded=!1:t.expanded=!0})},handleData(){this.$nextTick(()=>{if(this.$refs[this.ref])return this.allNodes=this.getAllNodes(this.$refs[this.ref].root.childNodes),this.allNodes.length&&(this.maxLevel=Math.max.apply(null,this.allNodes.map(({level:e})=>e))),this.$emit("max-level",this.maxLevel),this.handleCheckChange(),Promise.resolve()})},getAllNodes(){let e=[];const t=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(s=>{e.push(s),t(s)})};return t(this.$refs[this.ref]),e},handleCheckAllChange(){this.isIndeterminate=!1;let e=[];if(this.checkAll){const t=this.allNodes.filter(({visible:e,disabled:t})=>e&&!t);e=t.map(({key:e})=>e),this.$emit("check",{[this.$refs[this.ref].props.label||"label"]:"全选"},{checkedNodes:t,checkedKeys:e,halfCheckedNodes:[],halfCheckedKeys:[]})}else this.$emit("check",{[this.$refs[this.ref].props.label||"label"]:"全选"},{checkedNodes:[],checkedKeys:[],halfCheckedNodes:[],halfCheckedKeys:[]});this.$refs[this.ref].setCheckedKeys(e)},handleCheckChange(){this.showCheckAll&&this.showCheckbox&&this.data.length&&this.debounce(this.handleCheckAllStatus,100)},debounce(e,t){clearTimeout(this.timeout),this.timeout=setTimeout(e,t)},handleCheckAllStatus(){const e=this.allNodes.filter(({level:e,visible:t,disabled:s})=>1===e&&t&&!s);this.checkAll=e.every(({checked:e})=>e),this.isIndeterminate=e.some(({indeterminate:e})=>e)||e.some(({checked:e})=>e)&&!this.checkAll},handleCurrentChange(e,t){const{key:s,disabled:l}=t;this.handleDisabled(l,e,t)||(this.currentKey=s,this.$emit("current-change",e,t))},handleNodeClick(e,t,s){const{disabled:l}=t;this.handleDisabled(l,e,t)||this.$emit("node-click",e,t,s)},handleDisabled(e,t,s){if(e||(this.isLeafMethod?!this.isLeafMethod(t,s):this.currentIsLeaf&&!s.isLeaf))return this.$refs[this.ref].setCurrentKey(this.currentKey),!0},filter(e){this.$refs[this.ref].filter(e)}},mounted(){for(let e in this.$refs[this.ref])e in this||"function"!=typeof this.$refs[this.ref][e]||(this[e]=this.$refs[this.ref][e].bind(this.$refs[this.ref]));this.$emit("ready")}},a=(s(803),s(24)),h=Object(a.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-tree"},[e.showCheckAll&&e.showCheckbox&&e.data.length?s("el-checkbox",{staticClass:"b-tree-check-all",attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]):e._e(),e._v(" "),s("el-tree",e._g(e._b({key:e.key,ref:e.ref,attrs:{data:e.data,"node-key":e.nodeKey,"default-expand-all":e.defaultExpandAll,"default-expanded-keys":e.defaultExpandedKeys,"show-checkbox":e.showCheckbox,"filter-node-method":e.filterNodeMethod},on:{"check-change":e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,i=t.data;return e._t("default",(function(){return[s("text-ellipsis",e._b({class:{"custom-disabled":l.disabled},attrs:{content:l.label}},"text-ellipsis",e.textEllipsisProps,!1))]}),null,{node:l,data:i})}}],null,!0)},"el-tree",e.$attrs,!1),Object.assign({},e.$listeners,{"current-change":e.handleCurrentChange,"node-click":e.handleNodeClick})))],1)}),[],!1,null,null,null);t.default=h.exports},856:function(e,t,s){"use strict";s(823)},901:function(e,t,s){"use strict";s.r(t);var l={name:"SelectTree",inheritAttrs:!1,components:{Tree:s(835).default},props:{value:{type:[String,Number,Array],required:!0},multiple:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},selectProps:{type:Object,default:()=>({})},treeProps:{type:Object,default:()=>({}),required:!0}},data:()=>({isFirst:!0,treeKey:Math.random(),selectData:"",selectOptions:[],selectNode:null,multipleTempValue:[]}),computed:{treeBind(){return{showCheckbox:this.isMultiple,highlightCurrent:!this.isMultiple,expandOnClickNode:this.isMultiple||this.treeProps.currentIsLeaf,nodeKey:"id",...this.treeProps,defaultCheckedKeys:this.isMultiple?this.value:[],currentNodeKey:this.isMultiple?"":this.value}},isMultiple(){return this.selectProps.multiple||this.multiple}},watch:{value(){console.log(this.value,"value"),this.value+""!=this.selectData+""&&(console.log("value change"),this.treeKey=Math.random())}},methods:{init(){this.isMultiple?this.handleCheckChange():this.handleCurrentChange()},emitBase(){console.log("emitBase"),this.$emit("input",this.selectData),this.$emit("change",this.selectData,this.selectNode)},handleVisibleChange(e){e&&this.multiple&&(this.multipleTempValue=this.value),e&&this.filterable&&this.filter(),!e&&this.multiple&&this.value+""!=this.multipleTempValue+""&&(console.log("emit multiple change"),this.$emit("change",this.selectData,this.selectNode)),console.log("visible",e),this.$emit("visible-change",e)},handleClear(){this.isMultiple?(this.selectData=[],this.selectNode=[],this.$refs.tree.setCheckedKeys([])):(this.selectData="",this.selectNode=null,this.$refs.tree.setCurrentKey(null)),this.emitBase(),this.$emit("clear")},handleRemoveTag(e){this.$refs.tree.setChecked(e,!1);let t=this.$refs.tree.getNode(e);!this.$refs.tree.checkStrictly&&t.childNodes.length>0&&this.tree2List(t).map(e=>{e.childNodes.length<=0&&this.$refs.tree.setChecked(e,!1)}),this.handleCheckChange(),this.emitBase(),this.$emit("remove-tag",e)},handleCurrentChange(){if(this.isMultiple)return;this.selectOptions=[{}],console.log("current change");const e=this.$refs.tree.getCurrentNode();if(!e)return this.selectData="",this.selectNode=null,void(this.isFirst?this.isFirst=!1:(this.emitBase(),this.$refs.select.blur()));const t=this.$refs.tree.getNode(e);this.selectData="",this.selectNode=null;const s=t.key,l=t.label;this.selectOptions=[{value:s,label:l}],this.selectData=s,this.selectNode=t.data,this.isFirst?this.isFirst=!1:(this.emitBase(),console.log("blur"),this.$refs.select.blur())},handleCheckChange(){this.selectOptions=[{}],this.selectData=[],this.selectNode=[];this.$refs.tree.getCheckedKeys(this.treeProps.leafOnly,this.treeProps.includeHalfChecked).forEach(e=>{const t=this.$refs.tree.getNode(e),s=t.key;this.selectOptions.push({value:s,label:t.label}),this.selectData.push(s),this.selectNode.push(t.data)}),this.isFirst?this.isFirst=!1:this.$emit("input",this.selectData)},tree2List(e){let t=[],s=[];for(t=t.concat(e);t.length;){let e=t.shift();e.childNodes&&(t=t.concat(e.childNodes)),s.push(e)}return s},handleInput(e){this.filter(e.target.value)},filter(e){this.$refs.tree.filter(e)}},mounted(){for(let e in this.$refs.select)e in this||"function"!=typeof this.$refs.select[e]||(this[e]=this.$refs.select[e].bind(this.$refs.select))}},i=(s(856),s(24)),a=Object(i.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"select-tree"},[s("el-select",e._b({ref:"select",attrs:{"filter-method":function(){return!0}},on:{"visible-change":e.handleVisibleChange,"remove-tag":e.handleRemoveTag,clear:e.handleClear},nativeOn:{input:function(t){return e.handleInput.apply(null,arguments)}},model:{value:e.selectData,callback:function(t){e.selectData=t},expression:"selectData"}},"el-select",Object.assign({},e.$attrs,{multiple:e.multiple,filterable:e.filterable},e.selectProps),!1),[e._l(e.selectOptions,(function(e){return s("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),e._v(" "),s("tree",e._b({key:e.treeKey,ref:"tree",on:{"current-change":e.handleCurrentChange,"check-change":e.handleCheckChange,ready:e.init}},"tree",e.treeBind,!1))],2)],1)}),[],!1,null,"0fb7f955",null);t.default=a.exports}}]);